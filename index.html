<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ø¹Ø¨Ø§Ù‚Ø±Ø© - Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #1a1a2e;
            --bg-card: #16213e;
            --primary: #f9ca24;
            --secondary: #0f3460;
            --success: #2ecc71;
            --error: #e74c3c;
            --text: #e94560;
            --text-light: #ffffff;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: radial-gradient(circle, #1a1a2e 0%, #000000 100%);
            color: var(--text-light);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            text-align: center;
        }

        .container {
            width: 95%;
            max-width: 750px;
        }

        /* Screens */
        .screen {
            display: none;
            background: rgba(22, 33, 62, 0.9);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(0,0,0,0.7);
            border: 1px solid rgba(255,255,255,0.1);
            animation: zoomIn 0.4s ease-out;
            backdrop-filter: blur(10px);
        }

        .screen.active { display: block; }

        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        h1 { color: var(--primary); font-size: 2.5rem; margin-bottom: 10px; text-shadow: 0 0 10px rgba(249, 202, 36, 0.5); }
        h2 { font-size: 1.8rem; margin-bottom: 20px; }
        p { color: #ccc; font-size: 1.1rem; line-height: 1.6; }

        /* Buttons */
        .btn-main {
            background: linear-gradient(45deg, #f9ca24, #f6e58d);
            color: #2d3436;
            border: none;
            padding: 15px 50px;
            font-size: 1.4rem;
            border-radius: 50px;
            font-weight: 900;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            font-family: 'Tajawal', sans-serif;
            box-shadow: 0 10px 20px rgba(249, 202, 36, 0.3);
        }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(249, 202, 36, 0.5); }

        /* Category Grid */
        .cat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .cat-btn {
            background: linear-gradient(135deg, #0f3460, #16213e);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 25px;
            font-size: 1.3rem;
            color: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            font-family: 'Tajawal', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .cat-btn::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 5px;
        }
        .cat-btn.history::before { background: #e17055; }
        .cat-btn.geo::before { background: #00b894; }
        .cat-btn.science::before { background: #0984e3; }
        .cat-btn.general::before { background: #fdcb6e; }

        .cat-btn:hover { transform: translateY(-5px); background: #1a1a2e; border-color: var(--primary); }

        /* Question Area */
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            font-size: 1.2rem;
            color: var(--primary);
            background: rgba(0,0,0,0.3);
            padding: 12px 25px;
            border-radius: 50px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .question-box {
            background: linear-gradient(180deg, rgba(15, 52, 96, 0.8) 0%, rgba(22, 33, 62, 0.8) 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            font-size: 1.5rem;
            border: 1px solid rgba(255,255,255,0.1);
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.5);
        }

        .options-list { display: grid; gap: 15px; grid-template-columns: 1fr 1fr; }
        @media (max-width: 600px) { .options-list { grid-template-columns: 1fr; } }

        .option-btn {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            color: white;
            padding: 20px;
            font-size: 1.2rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Tajawal', sans-serif;
            position: relative;
        }

        .option-btn:hover { background: rgba(255,255,255,0.1); border-color: var(--primary); }
        .option-btn.correct { background: var(--success); border-color: var(--success); box-shadow: 0 0 15px var(--success); }
        .option-btn.wrong { background: var(--error); border-color: var(--error); opacity: 0.6; }

        /* Result */
        .result-circle {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            border: 8px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            margin: 30px auto;
            font-weight: 900;
            background: rgba(0,0,0,0.3);
            box-shadow: 0 0 30px rgba(249, 202, 36, 0.2);
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="start-screen" class="screen active">
            <h1 style="font-size: 6rem; margin: 0 0 20px 0;">ØŸ</h1>
            <h1>ØªØ­Ø¯ÙŠ Ø§Ù„Ø¹Ø¨Ø§Ù‚Ø±Ø©</h1>
            <p>10 Ù…Ø±Ø§Ø­Ù„ â€¢ 4 Ù…Ø¬Ø§Ù„Ø§Øª â€¢ Ø®ÙŠØ§Ø±Ø§Øª Ø°ÙƒÙŠØ©<br>Ø§Ù„Ù†Ø¬Ø§Ø­ ÙŠØªØ·Ù„Ø¨ 50 Ù†Ù‚Ø·Ø©</p>
            <button class="btn-main" onclick="Game.start()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
            <h2>Ø¨Ø±Ù…Ø¬Ø© Ùˆ ØªØµÙ…ÙŠÙ…</h2>
            <h3>Ø«Ø§Ø¦Ø± Ø§Ù„Ø´ÙˆÙŠÙ„ÙŠ</h3>
            <h4>2026</h1>
        </div>

        <div id="category-screen" class="screen">
            <div class="stats">
                <span id="cat-stage">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: 1 / 10</span>
                <span id="cat-score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</span>
            </div>
            <h2>Ø§Ø®ØªØ± Ù…Ø¬Ø§Ù„Ùƒ Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:</h2>
            <div class="cat-grid">
                <button class="cat-btn history" onclick="Game.selectCategory('history')">ğŸ“œ Ø§Ù„ØªØ§Ø±ÙŠØ®</button>
                <button class="cat-btn geo" onclick="Game.selectCategory('geo')">ğŸŒ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§</button>
                <button class="cat-btn science" onclick="Game.selectCategory('science')">ğŸ§ª Ø§Ù„Ø¹Ù„ÙˆÙ…</button>
                <button class="cat-btn general" onclick="Game.selectCategory('general')">ğŸ’¡ Ø«Ù‚Ø§ÙØ© Ø¹Ø§Ù…Ø©</button>
            </div>
        </div>

        <div id="game-screen" class="screen">
            <div class="stats">
                <span id="game-stage">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: 1</span>
                <span id="game-cat">Ø§Ù„Ù…Ø¬Ø§Ù„: ...</span>
            </div>
            <div id="question-text" class="question-box">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            <div id="options-container" class="options-list"></div>
        </div>

        <div id="result-screen" class="screen">
            <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
            <div class="result-circle" id="final-score">0</div>
            <div id="result-message"></div>
            <button class="btn-main" onclick="location.reload()">Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
        </div>
    </div>

    <script>
        // === Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© Ù…Ø¹ ØªØµÙ†ÙŠÙ Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ===
        // type: ÙŠØ­Ø¯Ø¯ Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù„Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø© ØªÙƒÙˆÙ† Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù†ÙˆØ¹
        // (person, country, year, city, number, element, nature)
        
        const database = {
            history: [
                {q: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¹Ù„Ù…Ø§Ù†ÙŠØ© ÙÙŠ ØªØ±ÙƒÙŠØ§ØŸ", a: "Ù…ØµØ·ÙÙ‰ ÙƒÙ…Ø§Ù„ Ø£ØªØ§ØªÙˆØ±Ùƒ", type: "person"},
                {q: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø§Ù„Ù†Ù‡Ø¶Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø© ÙÙŠ Ù…ØµØ±ØŸ", a: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ Ø¨Ø§Ø´Ø§", type: "person"},
                {q: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©ØŸ", a: "Ø§Ù„Ù…Ù„Ùƒ Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø²ÙŠØ² Ø¢Ù„ Ø³Ø¹ÙˆØ¯", type: "person"},
                {q: "Ù…Ù† Ù‡Ùˆ Ù‚Ø§Ø¦Ø¯ Ø«ÙˆØ±Ø© 1919Ù… ÙÙŠ Ù…ØµØ±ØŸ", a: "Ø³Ø¹Ø¯ Ø²ØºÙ„ÙˆÙ„", type: "person"},
                {q: "Ù…Ù† Ù‡Ùˆ Ø£ÙˆÙ„ Ø­Ø§ÙƒÙ… Ù„Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ù…ØºÙˆÙ„ÙŠØ©ØŸ", a: "Ø¬Ù†ÙƒÙŠØ² Ø®Ø§Ù†", type: "person"},
                {q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù…Ù„Ùƒ Ø§Ù„Ø°ÙŠ ØªÙ… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‡Ø±Ù… Ø§Ù„Ø£ÙƒØ¨Ø± Ù„Ù‡ØŸ", a: "Ø§Ù„Ù…Ù„Ùƒ Ø®ÙˆÙÙˆ", type: "person"},
                {q: "Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª Ù…Ù‚Ø³Ù…Ø© Ø¥Ù„Ù‰ Ø´Ø±Ù‚ÙŠØ© ÙˆØºØ±Ø¨ÙŠØ©ØŸ", a: "Ø£Ù„Ù…Ø§Ù†ÙŠØ§", type: "country"},
                {q: "Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„ØªÙŠ Ø§Ø´ØªØ±Øª Ù…Ù†Ù‡Ø§ Ø£Ù…Ø±ÙŠÙƒØ§ ÙˆÙ„Ø§ÙŠØ© Ø£Ù„Ø§Ø³ÙƒØ§ØŸ", a: "Ø±ÙˆØ³ÙŠØ§", type: "country"},
                {q: "Ù…ØªÙ‰ Ø§Ø³ØªÙ‚Ù„Øª Ù„ÙŠØ¨ÙŠØ§ Ø¹Ù† Ø¥ÙŠØ·Ø§Ù„ÙŠØ§ØŸ", a: "1951Ù…", type: "year"},
                {q: "ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… ØªÙ… Ø³Ù† Ù‚ÙˆØ§Ù†ÙŠÙ† Ø¹Ù…Ø§Ù„Ø© Ø§Ù„Ø£Ø·ÙØ§Ù„ ÙÙŠ Ø£Ù…Ø±ÙŠÙƒØ§ØŸ", a: "1938Ù…", type: "year"},
                {q: "ÙƒÙ… Ø³Ù†Ø© ÙÙŠ Ø§Ù„Ù‚Ø±Ù†ØŸ", a: "100 Ø³Ù†Ø©", type: "number"},
                {q: "ÙƒÙ… Ø³Ù†Ø© ÙÙŠ Ø§Ù„Ø¹Ù‚Ø¯ØŸ", a: "10 Ø³Ù†ÙˆØ§Øª", type: "number"}
            ],
            geo: [
                {q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†ØŸ", a: "Ø¨ÙˆÙŠÙ†Ø³ Ø¢ÙŠØ±Ø³", type: "city"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ø³ØªØ±Ø§Ù„ÙŠØ§ØŸ", a: "ÙƒØ§Ù†Ø¨ÙŠØ±Ø§", type: "city"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© ØªØ§ÙŠÙ„Ø§Ù†Ø¯ØŸ", a: "Ø¨Ø§Ù†ÙƒÙˆÙƒ", type: "city"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³ÙˆÙŠØ¯ØŸ", a: "Ø³ØªÙˆÙƒÙ‡ÙˆÙ„Ù…", type: "city"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø¨Ù„Ø¬ÙŠÙƒØ§ØŸ", a: "Ø¨Ø±ÙˆÙƒØ³Ù„", type: "city"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø£ÙŠØ±Ù„Ù†Ø¯Ø§ØŸ", a: "Ø¯Ø¨Ù„Ù†", type: "city"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ø´Ù‡ÙˆØ±Ø© Ø¨Ø§Ø³Ù… Ù…Ù‡Ø¯ Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ©ØŸ", a: "Ø£Ø«ÙŠÙ†Ø§", type: "city"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø¥Ù†ÙƒØ§ØŸ", a: "ÙƒÙˆØ²ÙƒÙˆ", type: "city"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø£ØµØºØ± Ø¯ÙˆÙ„ Ø§Ù„Ø®Ù„ÙŠØ¬ Ù…Ù† Ø­ÙŠØ« Ø§Ù„Ù…Ø³Ø§Ø­Ø©ØŸ", a: "Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†", type: "country"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø´Ù‡ÙˆØ±Ø© Ø¨Ø£Ù†Ù‡Ø§ Ø£Ø±Ø¶ Ø§Ù„Ø£Ù„Ù Ø¨Ø­ÙŠØ±Ø©ØŸ", a: "ÙÙ†Ù„Ù†Ø¯Ø§", type: "country"},
                {q: "Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ù†Ù‡Ø± Ø§Ù„Ø°ÙŠ ÙŠÙ…Ø± Ø¹Ø¨Ø± Ø¨Ø§Ø±ÙŠØ³ØŸ", a: "Ù†Ù‡Ø± Ø§Ù„Ø³ÙŠÙ†", type: "nature"},
                {q: "Ø£ÙƒØ¨Ø± Ø¨Ø­ÙŠØ±Ø© Ù…Ø§Ø¦ÙŠØ© ÙÙŠ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ØŸ", a: "Ø¨Ø­ÙŠØ±Ø© ÙÙŠÙƒØªÙˆØ±ÙŠØ§", type: "nature"},
                {q: "Ø£Ø·ÙˆÙ„ Ù†Ù‡Ø± ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", a: "Ù†Ù‡Ø± Ø§Ù„Ù†ÙŠÙ„", type: "nature"},
                {q: "Ø£Ø·ÙˆÙ„ Ù†Ù‡Ø± ÙÙŠ Ø¢Ø³ÙŠØ§ØŸ", a: "Ù†Ù‡Ø± Ø§Ù„ÙŠØ§Ù†ØºØªØ³ÙŠ", type: "nature"},
                {q: "Ø£Ø·ÙˆÙ„ Ø´Ù„Ø§Ù„Ø§Øª ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", a: "Ø´Ù„Ø§Ù„Ø§Øª Ø£Ù†Ø¬Ù„", type: "nature"},
                {q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù‡Ù†Ø¯ÙŠØ©ØŸ", a: "28", type: "number"}
            ],
            science: [
                {q: "Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ø­Ø¯ÙŠØ¯ØŸ", a: "Fe", type: "element"},
                {q: "Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ø°Ù‡Ø¨ØŸ", a: "Au", type: "element"},
                {q: "Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„ÙØ¶Ø©ØŸ", a: "Ag", type: "element"},
                {q: "Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ø²Ø¦Ø¨Ù‚ØŸ", a: "Hg", type: "element"},
                {q: "Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†ØŸ", a: "H", type: "element"},
                {q: "Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ù†Ø­Ø§Ø³ØŸ", a: "Cu", type: "element"},
                {q: "ÙƒÙ… Ù…Ù„ÙŠÙ…ØªØ± ÙÙŠ Ø§Ù„Ø³Ù†ØªÙŠÙ…ØªØ±ØŸ", a: "10 Ù…Ù…", type: "number"},
                {q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±Ø¬Ù„ Ø¬Ø±Ø§Ø¯ Ø§Ù„Ø¨Ø­Ø±ØŸ", a: "10", type: "number"},
                {q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø¹Ø¸Ø§Ù… Ø±Ù‚Ø¨Ø© Ø§Ù„Ø²Ø±Ø§ÙØ©ØŸ", a: "7", type: "number"},
                {q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙˆØ§ÙƒØ¨ ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ", a: "8", type: "number"},
                {q: "Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°Ø±ÙŠ Ù„Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†ØŸ", a: "1", type: "number"},
                {q: "Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°Ø±ÙŠ Ù„Ù„ØµÙˆØ¯ÙŠÙˆÙ…ØŸ", a: "11", type: "number"},
                {q: "Ù…Ù† ÙˆØ¶Ø¹ Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©ØŸ", a: "Ø£Ù„Ø¨Ø±Øª Ø§ÙŠÙ†Ø´ØªØ§ÙŠÙ†", type: "person"},
                {q: "Ù…Ù† ÙˆØ¶Ø¹ Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©ØŸ", a: "Ø¥Ø³Ø­Ø§Ù‚ Ù†ÙŠÙˆØªÙ†", type: "person"}
            ],
            general: [
                {q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ù†Ø© Ø§Ù„ÙƒØ¨ÙŠØ³Ø©ØŸ", a: "366 ÙŠÙˆÙ…", type: "number"},
                {q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©ØŸ", a: "365 ÙŠÙˆÙ…", type: "number"},
                {q: "ÙƒÙ… Ø¶Ù„Ø¹ ÙÙŠ Ø§Ù„Ù…Ø«Ù„Ø«ØŸ", a: "3", type: "number"},
                {q: "Ø­Ø§ØµÙ„ Ø¬Ù…Ø¹ 8 Ùˆ 2ØŸ", a: "10", type: "number"},
                {q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø°ÙŠ ÙŠØ±Ù…Ø² Ù„Ù„Ø³Ù„Ø§Ù…ØŸ", a: "Ø§Ù„Ø£Ø¨ÙŠØ¶", type: "color"},
                {q: "Ù…Ø§ Ù‡Ùˆ Ù„ÙˆÙ† Ø§Ù„Ø²Ù…Ø±Ø¯ØŸ", a: "Ø£Ø®Ø¶Ø±", type: "color"},
                {q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŸ", a: "Ø£Ø­Ù…Ø±ØŒ Ø£Ø²Ø±Ù‚ØŒ Ø£ØµÙØ±", type: "color"},
                {q: "Ù…Ø§ Ø§Ø³Ù… Ø£Ù†Ø«Ù‰ Ù…ÙŠÙƒÙŠ Ù…Ø§ÙˆØ³ØŸ", a: "Ù…ÙŠÙ†ÙŠ Ù…Ø§ÙˆØ³", type: "person"},
                {q: "Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© ÙÙŠ Ø£Ù…Ø±ÙŠÙƒØ§ØŸ", a: "Ø§Ù„Ø¨ÙŠØ³Ø¨ÙˆÙ„", type: "sport"},
                {q: "Ù…Ø§ Ù‡Ùˆ Ø¹ÙƒØ³ ÙƒÙ„Ù…Ø© ØºØ§Ù„ÙŠØŸ", a: "Ø±Ø®ÙŠØµ", type: "adj"}
            ]
        };

        // === Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„Ø¹Ø¨Ø© ===
        const Game = {
            stage: 1,
            score: 0,
            maxStages: 10,
            isBusy: false,
            usedQuestions: [],

            start: function() {
                this.stage = 1;
                this.score = 0;
                this.usedQuestions = [];
                this.isBusy = false;
                this.showScreen('category-screen');
                this.updateStats();
            },

            selectCategory: function(cat) {
                if(this.isBusy) return;
                
                // ØªØµÙÙŠØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø³ØªØ¹Ù…Ù„Ø©
                const pool = database[cat].filter(q => !this.usedQuestions.includes(q.q));
                
                // ÙÙŠ Ø­Ø§Ù„ Ù†ÙØ§Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ù†Ø§Ø¯Ø± Ø§Ù„Ø­Ø¯ÙˆØ« Ù…Ø¹ 10 Ù…Ø±Ø§Ø­Ù„) Ù†Ø¹ÙŠØ¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙ„
                const finalPool = pool.length > 0 ? pool : database[cat];
                
                // Ø§Ø®ØªÙŠØ§Ø± Ø³Ø¤Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
                const randomQ = finalPool[Math.floor(Math.random() * finalPool.length)];
                this.usedQuestions.push(randomQ.q);

                this.renderQuestion(randomQ, cat);
                this.showScreen('game-screen');
            },

            renderQuestion: function(qData, cat) {
                const catNames = {'history': 'ØªØ§Ø±ÙŠØ®', 'geo': 'Ø¬ØºØ±Ø§ÙÙŠØ§', 'science': 'Ø¹Ù„ÙˆÙ…', 'general': 'Ø«Ù‚Ø§ÙØ© Ø¹Ø§Ù…Ø©'};
                
                document.getElementById('question-text').innerText = qData.q;
                document.getElementById('game-cat').innerText = catNames[cat];
                document.getElementById('game-stage').innerText = `Ø§Ù„Ù…Ø±Ø­Ù„Ø©: ${this.stage}`;

                // === Ø§Ù„Ø°ÙƒØ§Ø¡ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ===
                // Ù†Ø±Ø³Ù„ Ù†ÙˆØ¹ Ø§Ù„Ø³Ø¤Ø§Ù„ (type) Ù„Ø¬Ù„Ø¨ Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø´Ø§Ø¨Ù‡Ø©
                const options = this.generateSmartOptions(qData.a, qData.type);
                
                const container = document.getElementById('options-container');
                container.innerHTML = '';

                options.forEach(opt => {
                    const btn = document.createElement('div');
                    btn.className = 'option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => this.checkAnswer(btn, opt, qData.a);
                    container.appendChild(btn);
                });
            },

            generateSmartOptions: function(correctAnswer, type) {
                // 1. ØªØ¬Ù…ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ù…Ù„Ø© Ø§Ù„ØªÙŠ ØªØ·Ø§Ø¨Ù‚ Ù†ÙØ³ "Ø§Ù„Ù†ÙˆØ¹"
                let sameTypePool = [];
                
                Object.keys(database).forEach(cat => {
                    database[cat].forEach(item => {
                        // Ø´Ø±Ø·: Ù†ÙØ³ Ø§Ù„Ù†ÙˆØ¹ØŒ ÙˆÙ„ÙŠØ³Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©ØŒ ÙˆÙ„Ù… ØªØ¶Ø§Ù Ù…Ø³Ø¨Ù‚Ø§Ù‹
                        if(item.type === type && item.a !== correctAnswer && !sameTypePool.includes(item.a)) {
                            sameTypePool.push(item.a);
                        }
                    });
                });

                // 2. Ø®Ù„Ø· Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø¨Ù‡Ø©
                sameTypePool = sameTypePool.sort(() => 0.5 - Math.random());

                // 3. Ø§Ø®ØªÙŠØ§Ø± 3 Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©
                let distractors = sameTypePool.slice(0, 3);

                // **Ø­Ø§Ù„Ø© Ø·ÙˆØ§Ø±Ø¦**: Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù†ÙˆØ¹ (Ù…Ø«Ù„Ø§Ù‹ Ù†ÙˆØ¹ Ù†Ø§Ø¯Ø±)
                // Ù†ÙƒÙ…Ù„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¨Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„ØªØ¬Ù†Ø¨ ØªÙˆÙ‚Ù Ø§Ù„Ù„Ø¹Ø¨Ø©
                if(distractors.length < 3) {
                    let randomBackup = [];
                     Object.keys(database).forEach(cat => {
                        database[cat].forEach(item => {
                            if(item.a !== correctAnswer && !distractors.includes(item.a)) randomBackup.push(item.a);
                        });
                    });
                    randomBackup = randomBackup.sort(() => 0.5 - Math.random());
                    while(distractors.length < 3) {
                        distractors.push(randomBackup.pop());
                    }
                }

                // 4. Ø¯Ù…Ø¬ Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…Ø¹ Ø§Ù„Ø®Ø§Ø·Ø¦Ø© ÙˆØ®Ù„Ø·Ù‡Ù…
                return [...distractors, correctAnswer].sort(() => 0.5 - Math.random());
            },

            checkAnswer: function(btn, selected, correct) {
                if(this.isBusy) return;
                this.isBusy = true;

                const allBtns = document.querySelectorAll('.option-btn');
                
                if(selected === correct) {
                    btn.classList.add('correct');
                    this.score += 10;
                } else {
                    btn.classList.add('wrong');
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­
                    allBtns.forEach(b => {
                        if(b.innerText === correct) b.classList.add('correct');
                    });
                }

                setTimeout(() => {
                    this.isBusy = false;
                    if(this.stage < this.maxStages) {
                        this.stage++;
                        this.updateStats();
                        this.showScreen('category-screen');
                    } else {
                        this.endGame();
                    }
                }, 1500);
            },

            endGame: function() {
                this.showScreen('result-screen');
                const scoreEl = document.getElementById('final-score');
                const msgEl = document.getElementById('result-message');
                
                scoreEl.innerText = this.score;
                
                if(this.score >= 50) {
                    scoreEl.style.borderColor = "var(--success)";
                    scoreEl.style.color = "var(--success)";
                    scoreEl.style.boxShadow = "0 0 30px var(--success)";
                    msgEl.innerHTML = "<h3 style='color:var(--success)'>ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø£Ù†Øª Ø¹Ø¨Ù‚Ø±ÙŠ ğŸ‰</h3>";
                } else {
                    scoreEl.style.borderColor = "var(--error)";
                    scoreEl.style.color = "var(--error)";
                    scoreEl.style.boxShadow = "0 0 30px var(--error)";
                    msgEl.innerHTML = "<h3 style='color:var(--error)'>Ù„Ù„Ø£Ø³Ù.. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</h3>";
                }
            },

            updateStats: function() {
                document.getElementById('cat-stage').innerText = `Ø§Ù„Ù…Ø±Ø­Ù„Ø©: ${this.stage} / ${this.maxStages}`;
                document.getElementById('cat-score').innerText = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${this.score}`;
            },

            showScreen: function(id) {
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.getElementById(id).classList.add('active');
            }
        };
    </script>
</body>
</html>
